<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Simple_grid_demo</title>
  </head>
  <body>
    <h1>Dumb grid demo!</h1>
    <div id="gridHolder"> </div>
  </body>
  <script src="https://raw.github.com/kriszyp/put-selector/master/put.js"></script><!-- I hate the DOM -->
  <script>
    var holder = document.querySelector('#gridHolder');
    var table = put(holder, 'table');
    var theader = put(table, 'thead > tr');
    var tbody = put(table, 'tbody');

    var theDatas = [
      {alpha:1, beta:2, charlie: 3},
      {alpha:1, beta:2, charlie: 3, delta: 4},
      {alpha:1, beta:2, charlie: 3, delta: 4, echo: 2, nested : {alpha:1, beta:2, charlie: 3, delta: 4, echo: 2}},
      {alpha:1, beta:2, charlie: 3, kilo: 6},
      {alpha:1, beta:2, charlie: 3, kilo: 6, bob: 42},
      {alpha:1, charlie: 3, kilo: 6},
      {alpha:1}
    ];

    var seenHash = {};

    theDatas.forEach(function(item) {

      // Take care of the header
      Object.keys(item).forEach(function(key) {

        // if we haven't seen it
        if (!(key in seenHash)) {

          // Add it to our hash (taking advantage of the fact that non-numeric
          // keys are kept in order which is nonstandard but universally
          // supported)
          seenHash[key] = true;

          // and add a new header to our table header
          put(theader, 'th', key);
        }
      });

      // Now for the item values, we make a new row for our table
      var valueRow = put('tr');

      // walk our full fields list so everything goes in the right column
      Object.keys(seenHash).forEach(function(field) {
        // and create a table cell with undefined being a special case since it's toString is 'undefined'
        put(valueRow, 'td', typeof item[field] === 'undefined' ? '' : item[field]);
      });

      // With our row complete, add it to the table body
      put(tbody, valueRow);

    });


  </script>
</html>
